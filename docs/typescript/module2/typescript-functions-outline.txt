================================================================================
FUNCTIONS TRONG TYPESCRIPT
Cho Playwright Automation Testing
================================================================================

================================================================================
M·ª§C TI√äU H·ªåC T·∫¨P
================================================================================

üéØ Sau khi ho√†n th√†nh module n√†y, b·∫°n s·∫Ω:

‚úÖ Hi·ªÉu r√µ s·ª± kh√°c bi·ªát gi·ªØa Function Declaration v√† Arrow Function
‚úÖ Bi·∫øt c√°ch khai b√°o type cho parameters v√† return type ch√≠nh x√°c
‚úÖ S·ª≠ d·ª•ng th√†nh th·∫°o Optional, Default, v√† Rest Parameters
‚úÖ √Åp d·ª•ng Function Overloading cho c√°c t√¨nh hu·ªëng ph·ª©c t·∫°p
‚úÖ Vi·∫øt functions t·ªëi ∆∞u v√† type-safe cho Playwright automation
‚úÖ N·∫Øm v·ªØng Best Practices khi l√†m vi·ªác v·ªõi functions trong TypeScript

================================================================================
T·ªîNG QUAN - T·∫†I SAO FUNCTIONS QUAN TR·ªåNG?
================================================================================

üéØ Functions l√† n·ªÅn t·∫£ng c·ªßa Automation Testing

‚úÖ T√°i s·ª≠ d·ª•ng code: Vi·∫øt m·ªôt l·∫ßn, d√πng nhi·ªÅu l·∫ßn
‚úÖ T·ªï ch·ª©c code: Chia nh·ªè logic ph·ª©c t·∫°p th√†nh c√°c ph·∫ßn d·ªÖ qu·∫£n l√Ω
‚úÖ Type Safety: TypeScript ki·ªÉm tra type ngay khi code
‚úÖ Maintainability: D·ªÖ d√†ng update v√† fix bugs
‚úÖ Testability: Functions nh·ªè d·ªÖ test h∆°n

üí° V√≠ d·ª• th·ª±c t·∫ø

// ‚ùå Kh√¥ng d√πng function - Code l·∫∑p l·∫°i
await page.goto('https://example.com/login');
await page.fill('#email', 'user1@test.com');
await page.fill('#password', 'Pass@123');
await page.click('#submit');

await page.goto('https://example.com/login');
await page.fill('#email', 'user2@test.com');
await page.fill('#password', 'Pass@456');
await page.click('#submit');

// ‚úÖ D√πng function - Clean, reusable
async function login(email: string, password: string): Promise<void> {
  await page.goto('https://example.com/login');
  await page.fill('#email', email);
  await page.fill('#password', password);
  await page.click('#submit');
}

// S·ª≠ d·ª•ng
await login('user1@test.com', 'Pass@123');
await login('user2@test.com', 'Pass@456');

================================================================================
M·ª§C L·ª§C
================================================================================

1. Function Declaration (Khai b√°o h√†m truy·ªÅn th·ªëng)
2. Arrow Function (H√†m m≈©i t√™n)
3. Typing cho Parameters & Return Type
4. Optional Parameters (Tham s·ªë t√πy ch·ªçn)
5. Default Parameters (Tham s·ªë m·∫∑c ƒë·ªãnh)
6. Rest Parameters (Tham s·ªë c√≤n l·∫°i)
7. Function Overloading
8. Best Practices

================================================================================
1. FUNCTION DECLARATION (Khai b√°o h√†m truy·ªÅn th·ªëng)
================================================================================

üìå C√∫ ph√°p c∆° b·∫£n

function functionName(param1: type, param2: type): returnType {
  // function body
  return value;
}

‚úÖ V√≠ d·ª• th·ª±c t·∫ø

// üìå Function kh√¥ng c√≥ return (void)
function printUrl(url: string): void {
  console.log('Navigating to:', url);
}

printUrl('https://example.com');
// Output: Navigating to: https://example.com

// üìå Function c√≥ return type string
function getFullUrl(baseUrl: string, path: string): string {
  return baseUrl + path;
}

const loginUrl = getFullUrl('https://example.com', '/login');
console.log(loginUrl); // https://example.com/login

// üìå Function c√≥ return type number
function calculateTimeout(baseTimeout: number, multiplier: number): number {
  return baseTimeout * multiplier;
}

const timeout = calculateTimeout(5000, 2);
console.log(timeout); // 10000

// üìå Function c√≥ return type boolean
function isValidEmail(email: string): boolean {
  return email.includes('@') && email.includes('.');
}

console.log(isValidEmail('test@example.com')); // true
console.log(isValidEmail('invalid-email')); // false

// üìå Function v·ªõi nhi·ªÅu parameters
function createUser(
  username: string, 
  email: string, 
  age: number
): object {
  return {
    username: username,
    email: email,
    age: age,
    createdAt: new Date()
  };
}

const newUser = createUser('john_doe', 'john@example.com', 25);
console.log(newUser);

--------------------------------------------------------------------------------

üí° ∆Øu ƒëi·ªÉm c·ªßa Function Declaration

‚úÖ D·ªÖ ƒë·ªçc, d·ªÖ hi·ªÉu v·ªõi ng∆∞·ªùi m·ªõi
‚úÖ Hoisting: C√≥ th·ªÉ g·ªçi function tr∆∞·ªõc khi khai b√°o
‚úÖ R√µ r√†ng v·ªõi t√™n function

// ‚úÖ Hoisting - G·ªçi tr∆∞·ªõc khi khai b√°o
greetUser('Alice'); // OK - Function ƒë∆∞·ª£c "hoisted"

function greetUser(name: string): void {
  console.log(`Hello, ${name}!`);
}

================================================================================
2. ARROW FUNCTION (H√†m m≈©i t√™n)
================================================================================

üìå C√∫ ph√°p c∆° b·∫£n

const functionName = (param1: type, param2: type): returnType => {
  // function body
  return value;
};

// C√∫ ph√°p ng·∫Øn g·ªçn (1 expression, t·ª± ƒë·ªông return)
const functionName = (param: type): returnType => expression;

‚úÖ V√≠ d·ª• th·ª±c t·∫ø

// üìå Arrow function c∆° b·∫£n
const getLoginUrl = (baseUrl: string): string => {
  return baseUrl + '/login';
};

console.log(getLoginUrl('https://example.com')); 
// Output: https://example.com/login

// üìå Arrow function ng·∫Øn g·ªçn (implicit return)
const getLoginUrlShort = (baseUrl: string): string => baseUrl + '/login';

console.log(getLoginUrlShort('https://example.com'));
// Output: https://example.com/login

// üìå Arrow function v·ªõi nhi·ªÅu parameters
const buildSelector = (tag: string, id: string): string => {
  return `${tag}#${id}`;
};

console.log(buildSelector('button', 'submit')); 
// Output: button#submit

// üìå Arrow function ng·∫Øn g·ªçn nhi·ªÅu params
const multiply = (a: number, b: number): number => a * b;

console.log(multiply(5, 3)); // 15

// üìå Arrow function kh√¥ng c√≥ parameters
const getCurrentTimestamp = (): number => Date.now();

console.log(getCurrentTimestamp()); // 1738166400000

// üìå Arrow function v·ªõi 1 parameter (c√≥ th·ªÉ b·ªè ngo·∫∑c)
const double = (num: number): number => num * 2;

console.log(double(5)); // 10

// üìå Arrow function return object (ch√∫ √Ω d·∫•u ngo·∫∑c)
const createConfig = (url: string, timeout: number) => ({
  baseUrl: url,
  timeout: timeout,
  headless: true
});

console.log(createConfig('https://example.com', 5000));
// Output: { baseUrl: 'https://example.com', timeout: 5000, headless: true }

--------------------------------------------------------------------------------

üìä So s√°nh Function Declaration vs Arrow Function

+---------------------------+----------------------+----------------------+
| ƒê·∫∑c ƒëi·ªÉm                  | Function Declaration | Arrow Function       |
+---------------------------+----------------------+----------------------+
| C√∫ ph√°p                   | function name() {}   | const name = () => {}|
| Hoisting                  | ‚úÖ C√≥                | ‚ùå Kh√¥ng             |
| this binding              | Dynamic              | Lexical (t·ª´ scope)   |
| D√πng l√†m method           | ‚úÖ T·ªët               | ‚ö†Ô∏è C·∫©n th·∫≠n          |
| Callback                  | ‚úÖ OK                | ‚úÖ T·ªët h∆°n           |
| ƒê·ªô ng·∫Øn g·ªçn               | ‚ö†Ô∏è D√†i h∆°n           | ‚úÖ Ng·∫Øn g·ªçn          |
| D√πng trong automation     | ‚úÖ Helper functions  | ‚úÖ Callbacks, utils  |
+---------------------------+----------------------+----------------------+

üí° Khi n√†o d√πng g√¨?

‚úÖ D√ôNG FUNCTION DECLARATION khi:
- Function c√≥ t√™n r√µ r√†ng, d·ªÖ debug
- C·∫ßn hoisting (g·ªçi tr∆∞·ªõc khi khai b√°o)
- ƒê·ªãnh nghƒ©a methods trong class

‚úÖ D√ôNG ARROW FUNCTION khi:
- Callback functions
- Array methods (map, filter, forEach)
- Short utility functions
- C·∫ßn gi·ªØ nguy√™n context 'this'

--------------------------------------------------------------------------------

üéØ V√≠ d·ª• th·ª±c t·∫ø trong Automation

// ‚úÖ Function Declaration - Helper functions
function validateLoginForm(email: string, password: string): boolean {
  if (!email || !password) {
    console.log('Email and password are required');
    return false;
  }
  if (!email.includes('@')) {
    console.log('Invalid email format');
    return false;
  }
  if (password.length < 6) {
    console.log('Password must be at least 6 characters');
    return false;
  }
  return true;
}

// ‚úÖ Arrow Function - Utilities
const buildFullUrl = (base: string, path: string): string => `${base}${path}`;

const formatSelector = (type: string, value: string): string => 
  `${type}[${value}]`;

const wait = (ms: number): void => {
  const start = Date.now();
  while (Date.now() - start < ms) {
    // wait
  }
};

// S·ª≠ d·ª•ng
if (validateLoginForm('user@example.com', 'Pass@123')) {
  const url = buildFullUrl('https://example.com', '/dashboard');
  const selector = formatSelector('button', 'id="submit"');
  console.log('Navigating to:', url);
  console.log('Clicking:', selector);
}

// ‚úÖ Arrow Function v·ªõi Array methods
const urls = ['/home', '/about', '/contact'];
const fullUrls = urls.map((path: string): string => 
  buildFullUrl('https://example.com', path)
);

console.log(fullUrls);
// Output: [
//   'https://example.com/home',
//   'https://example.com/about',
//   'https://example.com/contact'
// ]

================================================================================
3. TYPING CHO PARAMETERS & RETURN TYPE
================================================================================

üìå Quy t·∫Øc v√†ng

// ‚úÖ LU√îN LU√îN khai b√°o type cho parameters
// ‚úÖ N√äN khai b√°o return type (ƒë·ªÉ r√µ r√†ng)

‚úÖ V√≠ d·ª• chi ti·∫øt

// üìå Primitive types
function greet(name: string): string {
  return `Hello, ${name}!`;
}

function add(a: number, b: number): number {
  return a + b;
}

function isActive(status: boolean): boolean {
  return status === true;
}

// üìå Array types
function getFirstItem(items: string[]): string {
  return items[0];
}

function sumNumbers(numbers: number[]): number {
  return numbers.reduce((sum, num) => sum + num, 0);
}

// üìå Object types
function createUser(name: string, age: number): { name: string; age: number } {
  return { name, age };
}

// Ho·∫∑c d√πng interface/type
interface User {
  name: string;
  age: number;
  email: string;
}

function registerUser(name: string, age: number, email: string): User {
  return { name, age, email };
}

// üìå Union types
function getStatus(code: number): 'success' | 'error' | 'pending' {
  if (code === 200) return 'success';
  if (code >= 400) return 'error';
  return 'pending';
}

// üìå void return type (kh√¥ng return g√¨)
function logMessage(message: string): void {
  console.log(message);
  // Kh√¥ng c√≥ return statement
}

// üìå never return type (kh√¥ng bao gi·ªù return)
function throwError(message: string): never {
  throw new Error(message);
  // Kh√¥ng bao gi·ªù ƒë·∫øn ƒë∆∞·ª£c cu·ªëi function
}

function infiniteLoop(): never {
  while (true) {
    // infinite loop
  }
}

--------------------------------------------------------------------------------

üí° Type Inference v·ªõi Return Type

// TypeScript c√≥ th·ªÉ t·ª± suy lu·∫≠n return type
// Nh∆∞ng N√äN khai b√°o r√µ r√†ng ƒë·ªÉ d·ªÖ ƒë·ªçc

// ‚ö†Ô∏è Kh√¥ng khai b√°o - TypeScript t·ª± suy lu·∫≠n
function multiply(a: number, b: number) {
  return a * b; // TypeScript bi·∫øt return type l√† number
}

// ‚úÖ N√™n khai b√°o r√µ r√†ng
function multiplyExplicit(a: number, b: number): number {
  return a * b;
}

--------------------------------------------------------------------------------

üéØ V√≠ d·ª• th·ª±c t·∫ø trong Automation

// üìå Configuration builder
interface BrowserConfig {
  browser: 'chrome' | 'firefox' | 'safari';
  headless: boolean;
  timeout: number;
}

function createBrowserConfig(
  browser: 'chrome' | 'firefox' | 'safari',
  headless: boolean = true,
  timeout: number = 30000
): BrowserConfig {
  return { browser, headless, timeout };
}

const config = createBrowserConfig('chrome', false, 60000);
console.log(config);

// üìå Selector builder
function buildCssSelector(
  tag: string,
  attributes: { [key: string]: string }
): string {
  let selector = tag;
  for (const [key, value] of Object.entries(attributes)) {
    selector += `[${key}="${value}"]`;
  }
  return selector;
}

const emailInput = buildCssSelector('input', { type: 'email', name: 'email' });
console.log(emailInput); // input[type="email"][name="email"]

// üìå Data validator
function validateUserData(
  username: string,
  email: string,
  age: number
): { valid: boolean; errors: string[] } {
  const errors: string[] = [];
  
  if (username.length < 3) {
    errors.push('Username must be at least 3 characters');
  }
  if (!email.includes('@')) {
    errors.push('Invalid email format');
  }
  if (age < 18) {
    errors.push('Age must be at least 18');
  }
  
  return {
    valid: errors.length === 0,
    errors: errors
  };
}

const result = validateUserData('jo', 'invalid-email', 15);
console.log(result);
// { valid: false, errors: [...] }

================================================================================
4. OPTIONAL PARAMETERS (Tham s·ªë t√πy ch·ªçn)
================================================================================

üìå C√∫ ph√°p: S·ª≠ d·ª•ng d·∫•u ?

function functionName(required: type, optional?: type): returnType {
  // function body
}

‚ö†Ô∏è L∆ØU √ù: Optional parameters ph·∫£i ·ªü cu·ªëi danh s√°ch parameters

‚úÖ V√≠ d·ª• c∆° b·∫£n

// üìå Optional parameter ƒë∆°n gi·∫£n
function greetUser(name: string, title?: string): string {
  if (title) {
    return `Hello, ${title} ${name}!`;
  }
  return `Hello, ${name}!`;
}

console.log(greetUser('John')); 
// Output: Hello, John!

console.log(greetUser('John', 'Mr.')); 
// Output: Hello, Mr. John!

// üìå Nhi·ªÅu optional parameters
function createUrl(
  protocol: string,
  domain: string,
  path?: string,
  query?: string
): string {
  let url = `${protocol}://${domain}`;
  
  if (path) {
    url += path;
  }
  
  if (query) {
    url += `?${query}`;
  }
  
  return url;
}

console.log(createUrl('https', 'example.com'));
// https://example.com

console.log(createUrl('https', 'example.com', '/login'));
// https://example.com/login

console.log(createUrl('https', 'example.com', '/search', 'q=typescript'));
// https://example.com/search?q=typescript

// üìå Optional v·ªõi type checking
function getElementSelector(
  id?: string,
  className?: string,
  tagName?: string
): string {
  if (id) {
    return `#${id}`;
  }
  if (className) {
    return `.${className}`;
  }
  if (tagName) {
    return tagName;
  }
  return '*'; // default selector
}

console.log(getElementSelector('login-btn')); // #login-btn
console.log(getElementSelector(undefined, 'button')); // .button
console.log(getElementSelector(undefined, undefined, 'input')); // input

--------------------------------------------------------------------------------

üéØ V√≠ d·ª• th·ª±c t·∫ø trong Automation

// üìå Page navigation v·ªõi optional timeout
function navigateToPage(url: string, timeout?: number): void {
  const actualTimeout = timeout || 30000; // default 30s
  console.log(`Navigating to ${url} with timeout ${actualTimeout}ms`);
}

navigateToPage('https://example.com');
navigateToPage('https://example.com', 60000);

// üìå Login function v·ªõi optional remember me
interface LoginCredentials {
  email: string;
  password: string;
  rememberMe?: boolean;
}

function login(credentials: LoginCredentials): void {
  console.log('Email:', credentials.email);
  console.log('Password:', credentials.password);
  console.log('Remember me:', credentials.rememberMe || false);
}

login({ email: 'user@example.com', password: 'Pass@123' });
login({ email: 'user@example.com', password: 'Pass@123', rememberMe: true });

// üìå Wait function v·ªõi optional message
function waitFor(milliseconds: number, message?: string): void {
  if (message) {
    console.log(`Waiting ${milliseconds}ms: ${message}`);
  } else {
    console.log(`Waiting ${milliseconds}ms...`);
  }
}

waitFor(5000);
waitFor(5000, 'Loading page');

================================================================================
5. DEFAULT PARAMETERS (Tham s·ªë m·∫∑c ƒë·ªãnh)
================================================================================

üìå C√∫ ph√°p: G√°n gi√° tr·ªã m·∫∑c ƒë·ªãnh cho parameter

function functionName(param: type = defaultValue): returnType {
  // function body
}

üí° ∆Øu ƒëi·ªÉm: Kh√¥ng c·∫ßn ki·ªÉm tra undefined nh∆∞ optional parameters

‚úÖ V√≠ d·ª• c∆° b·∫£n

// üìå Default parameter ƒë∆°n gi·∫£n
function greet(name: string, greeting: string = 'Hello'): string {
  return `${greeting}, ${name}!`;
}

console.log(greet('Alice')); 
// Output: Hello, Alice!

console.log(greet('Alice', 'Hi')); 
// Output: Hi, Alice!

// üìå Default v·ªõi number
function calculateTotal(price: number, tax: number = 0.1): number {
  return price + (price * tax);
}

console.log(calculateTotal(100)); // 110 (10% tax)
console.log(calculateTotal(100, 0.2)); // 120 (20% tax)

// üìå Default v·ªõi boolean
function createConfig(
  url: string,
  headless: boolean = true,
  timeout: number = 30000
): object {
  return { url, headless, timeout };
}

console.log(createConfig('https://example.com'));
// { url: 'https://example.com', headless: true, timeout: 30000 }

console.log(createConfig('https://example.com', false, 60000));
// { url: 'https://example.com', headless: false, timeout: 60000 }

// üìå Default v·ªõi array
function processItems(items: string[] = []): number {
  return items.length;
}

console.log(processItems()); // 0
console.log(processItems(['a', 'b', 'c'])); // 3

// üìå Default v·ªõi object
function setupBrowser(
  options: { headless: boolean; timeout: number } = { headless: true, timeout: 30000 }
): void {
  console.log('Headless:', options.headless);
  console.log('Timeout:', options.timeout);
}

setupBrowser();
setupBrowser({ headless: false, timeout: 60000 });

--------------------------------------------------------------------------------

üí° Optional vs Default Parameters

+---------------------------+----------------------+----------------------+
| ƒê·∫∑c ƒëi·ªÉm                  | Optional (?)         | Default (=)          |
+---------------------------+----------------------+----------------------+
| C√∫ ph√°p                   | param?: type         | param: type = value  |
| Gi√° tr·ªã khi kh√¥ng truy·ªÅn  | undefined            | Gi√° tr·ªã m·∫∑c ƒë·ªãnh     |
| C·∫ßn ki·ªÉm tra undefined    | ‚úÖ C√≥                | ‚ùå Kh√¥ng c·∫ßn         |
| Type                      | type | undefined    | type                 |
| Linh ho·∫°t                 | ‚úÖ Cao h∆°n           | ‚ö†Ô∏è C·ªë ƒë·ªãnh           |
| D√πng khi                  | Gi√° tr·ªã c√≥ th·ªÉ null  | C√≥ gi√° tr·ªã m·∫∑c ƒë·ªãnh  |
+---------------------------+----------------------+----------------------+

// ‚ö†Ô∏è Optional - Ph·∫£i ki·ªÉm tra
function greetOptional(name: string, title?: string): string {
  if (title) { // Ph·∫£i check
    return `Hello, ${title} ${name}`;
  }
  return `Hello, ${name}`;
}

// ‚úÖ Default - Kh√¥ng c·∫ßn ki·ªÉm tra
function greetDefault(name: string, title: string = ''): string {
  return title ? `Hello, ${title} ${name}` : `Hello, ${name}`;
}

--------------------------------------------------------------------------------

üéØ V√≠ d·ª• th·ª±c t·∫ø trong Automation

// üìå Retry mechanism v·ªõi default attempts
function retryAction(
  action: () => void,
  maxAttempts: number = 3,
  delayMs: number = 1000
): void {
  let attempts = 0;
  
  while (attempts < maxAttempts) {
    try {
      console.log(`Attempt ${attempts + 1}/${maxAttempts}`);
      action();
      console.log('Action successful!');
      break;
    } catch (error) {
      attempts++;
      if (attempts < maxAttempts) {
        console.log(`Waiting ${delayMs}ms before retry...`);
      } else {
        console.log('Max attempts reached. Action failed.');
      }
    }
  }
}

// S·ª≠ d·ª•ng
retryAction(() => console.log('Executing action'));
retryAction(() => console.log('Executing action'), 5);
retryAction(() => console.log('Executing action'), 5, 2000);

// üìå Build selector v·ªõi default strategies
function buildSelector(
  value: string,
  strategy: 'id' | 'class' | 'css' | 'xpath' = 'css'
): string {
  switch (strategy) {
    case 'id':
      return `#${value}`;
    case 'class':
      return `.${value}`;
    case 'css':
      return value;
    case 'xpath':
      return `//*[@id="${value}"]`;
    default:
      return value;
  }
}

console.log(buildSelector('login-btn')); // login-btn (css)
console.log(buildSelector('login-btn', 'id')); // #login-btn
console.log(buildSelector('btn-primary', 'class')); // .btn-primary

// üìå Logger v·ªõi default log level
type LogLevel = 'info' | 'warn' | 'error';

function log(
  message: string,
  level: LogLevel = 'info',
  timestamp: boolean = true
): void {
  const time = timestamp ? `[${new Date().toISOString()}] ` : '';
  const prefix = level.toUpperCase();
  console.log(`${time}${prefix}: ${message}`);
}

log('Application started');
log('Warning: Low memory', 'warn');
log('Error occurred', 'error', false);

================================================================================
6. REST PARAMETERS (Tham s·ªë c√≤n l·∫°i)
================================================================================

üìå C√∫ ph√°p: S·ª≠ d·ª•ng ... (spread operator)

function functionName(...params: type[]): returnType {
  // params l√† m·ªôt array
}

üí° Cho ph√©p truy·ªÅn s·ªë l∆∞·ª£ng tham s·ªë kh√¥ng x√°c ƒë·ªãnh

‚úÖ V√≠ d·ª• c∆° b·∫£n

// üìå Sum nhi·ªÅu numbers
function sum(...numbers: number[]): number {
  return numbers.reduce((total, num) => total + num, 0);
}

console.log(sum(1, 2, 3)); // 6
console.log(sum(1, 2, 3, 4, 5)); // 15
console.log(sum(10)); // 10

// üìå Concat nhi·ªÅu strings
function concatenate(...strings: string[]): string {
  return strings.join(' ');
}

console.log(concatenate('Hello', 'World')); // Hello World
console.log(concatenate('TypeScript', 'is', 'awesome')); // TypeScript is awesome

// üìå Rest parameters v·ªõi tham s·ªë kh√°c
function buildUrl(baseUrl: string, ...paths: string[]): string {
  return baseUrl + '/' + paths.join('/');
}

console.log(buildUrl('https://example.com', 'users', 'profile'));
// https://example.com/users/profile

console.log(buildUrl('https://example.com', 'api', 'v1', 'products', '123'));
// https://example.com/api/v1/products/123

--------------------------------------------------------------------------------

üéØ V√≠ d·ª• th·ª±c t·∫ø trong Automation

// üìå Log nhi·ªÅu messages c√πng l√∫c
function logMessages(level: 'info' | 'error', ...messages: string[]): void {
  messages.forEach(msg => {
    console.log(`[${level.toUpperCase()}] ${msg}`);
  });
}

logMessages('info', 'Test started', 'Opening browser', 'Navigating to page');
logMessages('error', 'Element not found', 'Test failed');

// üìå Combine selectors
function combineSelectors(...selectors: string[]): string {
  return selectors.join(', ');
}

const selector = combineSelectors('#submit', '.btn-primary', '[data-test="submit"]');
console.log(selector);
// #submit, .btn-primary, [data-test="submit"]

// üìå Validate nhi·ªÅu emails
function validateEmails(...emails: string[]): boolean[] {
  return emails.map(email => email.includes('@') && email.includes('.'));
}

const results = validateEmails('user1@test.com', 'invalid', 'user2@test.com');
console.log(results); // [true, false, true]

================================================================================
7. FUNCTION OVERLOADING (N·∫°p ch·ªìng h√†m)
================================================================================

üìå Function Overloading: ƒê·ªãnh nghƒ©a nhi·ªÅu signature cho c√πng 1 function

üí° T·∫°i sao c·∫ßn Function Overloading?
- Cho ph√©p function ch·∫•p nh·∫≠n nhi·ªÅu lo·∫°i tham s·ªë kh√°c nhau
- Cung c·∫•p IntelliSense t·ªët h∆°n
- Type-safe cho t·ª´ng tr∆∞·ªùng h·ª£p s·ª≠ d·ª•ng

‚úÖ V√≠ d·ª• c∆° b·∫£n

// Overload signatures (Khai b√°o c√°c signatures)
function buildSelector(id: string): string;
function buildSelector(tag: string, className: string): string;
function buildSelector(tag: string, id: string, className: string): string;

// Implementation signature (Th·ª±c thi)
function buildSelector(
  arg1: string,
  arg2?: string,
  arg3?: string
): string {
  if (arg2 === undefined && arg3 === undefined) {
    return `#${arg1}`; // Only ID
  } else if (arg3 === undefined) {
    return `${arg1}.${arg2}`; // Tag + Class
  } else {
    return `${arg1}#${arg2}.${arg3}`; // Tag + ID + Class
  }
}

// S·ª≠ d·ª•ng
console.log(buildSelector('submit')); // #submit
console.log(buildSelector('button', 'btn-primary')); // button.btn-primary
console.log(buildSelector('button', 'submit', 'btn-primary')); 
// button#submit.btn-primary

--------------------------------------------------------------------------------

üéØ V√≠ d·ª• chi ti·∫øt

// üìå V√ç D·ª§ 1: Click element v·ªõi nhi·ªÅu options

// Overload signatures
function click(selector: string): void;
function click(selector: string, options: { timeout: number }): void;
function click(selector: string, options: { timeout: number; force: boolean }): void;

// Implementation
function click(
  selector: string,
  options?: { timeout?: number; force?: boolean }
): void {
  console.log(`Clicking: ${selector}`);
  
  if (options?.timeout) {
    console.log(`Timeout: ${options.timeout}ms`);
  }
  
  if (options?.force) {
    console.log('Force click: true');
  }
}

// S·ª≠ d·ª•ng
click('#submit');
click('#submit', { timeout: 5000 });
click('#submit', { timeout: 5000, force: true });

// üìå V√ç D·ª§ 2: Wait function v·ªõi nhi·ªÅu ki·ªÉu

// Overload signatures
function wait(milliseconds: number): void;
function wait(selector: string): void;
function wait(callback: () => boolean): void;

// Implementation
function wait(arg: number | string | (() => boolean)): void {
  if (typeof arg === 'number') {
    console.log(`Waiting ${arg}ms`);
  } else if (typeof arg === 'string') {
    console.log(`Waiting for selector: ${arg}`);
  } else if (typeof arg === 'function') {
    console.log('Waiting for condition');
  }
}

// S·ª≠ d·ª•ng
wait(5000);                    // Wait milliseconds
wait('#content');              // Wait for selector
wait(() => true);              // Wait for condition

// üìå V√ç D·ª§ 3: getValue v·ªõi nhi·ªÅu return types

// Overload signatures
function getValue(selector: string, attribute: 'text'): string;
function getValue(selector: string, attribute: 'value'): string;
function getValue(selector: string, attribute: 'count'): number;
function getValue(selector: string, attribute: 'visible'): boolean;

// Implementation
function getValue(
  selector: string,
  attribute: 'text' | 'value' | 'count' | 'visible'
): string | number | boolean {
  switch (attribute) {
    case 'text':
      return 'Sample text';
    case 'value':
      return 'input value';
    case 'count':
      return 5;
    case 'visible':
      return true;
  }
}

// S·ª≠ d·ª•ng - TypeScript bi·∫øt ch√≠nh x√°c return type
const text: string = getValue('#title', 'text');
const value: string = getValue('#input', 'value');
const count: number = getValue('.items', 'count');
const visible: boolean = getValue('#modal', 'visible');

// üìå V√ç D·ª§ 4: Parse data v·ªõi nhi·ªÅu types

// Overload signatures
function parseData(data: string): object;
function parseData(data: string, returnArray: true): any[];
function parseData(data: string, returnArray: false): object;

// Implementation
function parseData(data: string, returnArray?: boolean): object | any[] {
  const parsed = JSON.parse(data);
  
  if (returnArray === true) {
    return Array.isArray(parsed) ? parsed : [parsed];
  }
  
  return parsed;
}

// S·ª≠ d·ª•ng
const obj = parseData('{"name": "John"}');           // object
const arr = parseData('[1,2,3]', true);              // any[]
const obj2 = parseData('{"name": "Jane"}', false);   // object

--------------------------------------------------------------------------------

üéØ V√≠ d·ª• th·ª±c t·∫ø trong Automation

// üìå Navigate function v·ªõi overloading
function navigate(url: string): void;
function navigate(url: string, timeout: number): void;
function navigate(url: string, timeout: number, waitForSelector: string): void;

function navigate(
  url: string,
  timeout?: number,
  waitForSelector?: string
): void {
  console.log(`Navigating to: ${url}`);
  
  if (timeout) {
    console.log(`Timeout: ${timeout}ms`);
  }
  
  if (waitForSelector) {
    console.log(`Waiting for selector: ${waitForSelector}`);
  }
}

// S·ª≠ d·ª•ng
navigate('https://example.com');
navigate('https://example.com', 30000);
navigate('https://example.com', 30000, '#content');

// üìå Fill form v·ªõi nhi·ªÅu ki·ªÉu input

interface TextOptions {
  delay?: number;
  clear?: boolean;
}

interface SelectOptions {
  label?: string;
  value?: string;
  index?: number;
}

// Overload signatures
function fill(selector: string, value: string): void;
function fill(selector: string, value: string, options: TextOptions): void;
function fill(selector: string, options: SelectOptions): void;

// Implementation
function fill(
  selector: string,
  valueOrOptions: string | SelectOptions,
  options?: TextOptions
): void {
  console.log(`Filling: ${selector}`);
  
  if (typeof valueOrOptions === 'string') {
    console.log(`Value: ${valueOrOptions}`);
    if (options?.delay) {
      console.log(`Delay: ${options.delay}ms`);
    }
    if (options?.clear) {
      console.log('Clear before fill: true');
    }
  } else {
    if (valueOrOptions.label) {
      console.log(`Select by label: ${valueOrOptions.label}`);
    }
    if (valueOrOptions.value) {
      console.log(`Select by value: ${valueOrOptions.value}`);
    }
    if (valueOrOptions.index !== undefined) {
      console.log(`Select by index: ${valueOrOptions.index}`);
    }
  }
}

// S·ª≠ d·ª•ng
fill('#email', 'user@test.com');
fill('#email', 'user@test.com', { delay: 100, clear: true });
fill('#country', { label: 'Vietnam' });
fill('#country', { value: 'vn' });
fill('#country', { index: 2 });

--------------------------------------------------------------------------------

üí° Best Practices cho Function Overloading

‚úÖ DOs:
1. Overload signatures ph·∫£i c·ª• th·ªÉ h∆°n implementation
2. Implementation signature ph·∫£i cover t·∫•t c·∫£ overload cases
3. D√πng khi function th·ª±c s·ª± c√≥ nhi·ªÅu c√°ch s·ª≠ d·ª•ng kh√°c nhau
4. ƒê·∫∑t overload t·ª´ c·ª• th·ªÉ nh·∫•t ƒë·∫øn chung nh·∫•t

‚ùå DON'Ts:
1. Kh√¥ng overload qu√° nhi·ªÅu (>5 signatures)
2. Kh√¥ng d√πng khi c√≥ th·ªÉ d√πng optional/default parameters
3. Kh√¥ng ƒë·ªÉ implementation signature public (n√≥ ch·ªâ ƒë·ªÉ implement)

// ‚ùå Qu√° ph·ª©c t·∫°p
function process(a: string): void;
function process(a: string, b: number): void;
function process(a: string, b: number, c: boolean): void;
function process(a: string, b: number, c: boolean, d: object): void;
function process(a: string, b: number, c: boolean, d: object, e: any[]): void;

// ‚úÖ D√πng options object thay th·∫ø
interface ProcessOptions {
  b?: number;
  c?: boolean;
  d?: object;
  e?: any[];
}

function process(a: string, options?: ProcessOptions): void {
  // Implementation
}

================================================================================
8. BEST PRACTICES
================================================================================

‚úÖ DOs - N√™n l√†m

// 1. ‚úÖ LU√îN khai b√°o type cho parameters
function createUser(name: string, age: number): object {
  return { name, age };
}

// 2. ‚úÖ N√äN khai b√°o return type r√µ r√†ng
function getUrl(path: string): string {
  return `https://example.com${path}`;
}

// 3. ‚úÖ D√πng arrow function cho callbacks
const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map((n: number): number => n * 2);

// 4. ‚úÖ Default parameters thay v√¨ optional khi c√≥ gi√° tr·ªã m·∫∑c ƒë·ªãnh
function setTimeout(ms: number = 5000): void {
  console.log(`Timeout: ${ms}ms`);
}

// 5. ‚úÖ Rest parameters cho s·ªë l∆∞·ª£ng tham s·ªë kh√¥ng x√°c ƒë·ªãnh
function combineUrls(...paths: string[]): string {
  return paths.join('/');
}

// 6. ‚úÖ ƒê·∫∑t t√™n function r√µ r√†ng, m√¥ t·∫£ h√†nh ƒë·ªông
function validateEmailFormat(email: string): boolean {
  return email.includes('@');
}

function buildCssSelector(tag: string, id: string): string {
  return `${tag}#${id}`;
}

‚ùå DON'Ts - Tr√°nh l√†m

// 1. ‚ùå KH√îNG b·ªè qua type cho parameters
function greet(name) { // ‚ùå Missing type
  return `Hello, ${name}`;
}

// 2. ‚ùå KH√îNG d√πng any n·∫øu kh√¥ng c·∫ßn thi·∫øt
function process(data: any): any { // ‚ùå Avoid any
  return data;
}

// 3. ‚ùå KH√îNG ƒë·∫∑t optional parameters tr∆∞·ªõc required
function createUser(age?: number, name: string) { // ‚ùå Wrong order
  // ...
}

// 4. ‚ùå KH√îNG t·∫°o function qu√° d√†i, qu√° ph·ª©c t·∫°p
// Split th√†nh nhi·ªÅu functions nh·ªè h∆°n

// 5. ‚ùå KH√îNG d√πng function declaration cho simple callbacks
// D√πng arrow function thay th·∫ø

--------------------------------------------------------------------------------

üéØ V√≠ d·ª• ho√†n ch·ªânh - Page Helper Class

// ========== TYPES & INTERFACES ==========
type BrowserType = 'chrome' | 'firefox' | 'safari';

interface PageConfig {
  url: string;
  timeout?: number;
  headless?: boolean;
}

interface Selector {
  type: 'id' | 'class' | 'css' | 'xpath';
  value: string;
}

// ========== HELPER FUNCTIONS ==========

// Function Declaration - Main helpers
function buildFullUrl(
  protocol: string,
  domain: string,
  path: string = '/'
): string {
  return `${protocol}://${domain}${path}`;
}

function validateUrl(url: string): boolean {
  try {
    new URL(url);
    return true;
  } catch {
    return false;
  }
}

// Arrow Functions - Simple utilities
const formatTimeout = (seconds: number): number => seconds * 1000;

const isValidSelector = (selector: string): boolean => 
  selector.length > 0 && !selector.includes(' ');

const getCurrentTime = (): string => new Date().toISOString();

// Optional Parameters
function createPageConfig(
  url: string,
  timeout?: number,
  headless?: boolean
): PageConfig {
  const config: PageConfig = { url };
  
  if (timeout !== undefined) {
    config.timeout = timeout;
  }
  
  if (headless !== undefined) {
    config.headless = headless;
  }
  
  return config;
}

// Default Parameters
function initBrowser(
  browser: BrowserType = 'chrome',
  headless: boolean = true,
  timeout: number = 30000
): void {
  console.log('=== Browser Configuration ===');
  console.log('Browser:', browser);
  console.log('Headless:', headless);
  console.log('Timeout:', timeout);
}

// Rest Parameters
function logSteps(...steps: string[]): void {
  console.log('\n=== Test Steps ===');
  steps.forEach((step, index) => {
    console.log(`${index + 1}. ${step}`);
  });
}

// Function Overloading
function buildSelector(id: string): string;
function buildSelector(type: 'id' | 'class', value: string): string;
function buildSelector(
  arg1: string,
  arg2?: string
): string {
  if (arg2 === undefined) {
    return `#${arg1}`;
  }
  
  if (arg1 === 'id') {
    return `#${arg2}`;
  } else if (arg1 === 'class') {
    return `.${arg2}`;
  }
  
  return arg1;
}

// ========== USAGE EXAMPLES ==========

// 1. URL Building
const homeUrl = buildFullUrl('https', 'example.com', '/home');
const loginUrl = buildFullUrl('https', 'example.com', '/login');

console.log('Home URL:', homeUrl);
console.log('Login URL:', loginUrl);

// 2. URL Validation
console.log('\n=== URL Validation ===');
console.log('Valid URL:', validateUrl(homeUrl));
console.log('Invalid URL:', validateUrl('not-a-url'));

// 3. Page Config
const config1 = createPageConfig('https://example.com');
const config2 = createPageConfig('https://example.com', 60000);
const config3 = createPageConfig('https://example.com', 60000, false);

console.log('\n=== Page Configs ===');
console.log('Config 1:', config1);
console.log('Config 2:', config2);
console.log('Config 3:', config3);

// 4. Browser Init
console.log('\n=== Browser Init ===');
initBrowser(); // Defaults
initBrowser('firefox', false, 60000); // Custom

// 5. Logging Steps
logSteps(
  'Navigate to login page',
  'Enter credentials',
  'Click submit button',
  'Verify dashboard loaded'
);

// 6. Selector Building
console.log('\n=== Selectors ===');
console.log('By ID:', buildSelector('login-btn'));
console.log('By Class:', buildSelector('class', 'btn-primary'));
console.log('By ID (explicit):', buildSelector('id', 'submit'));

// 7. Arrow Function v·ªõi Array
const pages = ['/home', '/about', '/contact'];
const fullPageUrls = pages.map((path: string): string => 
  buildFullUrl('https', 'example.com', path)
);

console.log('\n=== Full Page URLs ===');
fullPageUrls.forEach(url => console.log(url));

// 8. Current Time
console.log('\n=== Timestamp ===');
console.log('Current time:', getCurrentTime());
console.log('Timeout (5s):', formatTimeout(5), 'ms');

================================================================================
T√ìM T·∫ÆT - CHEAT SHEET
================================================================================

Function Declaration
---------------------
function name(param: type): returnType {
  return value;
}

Arrow Function
--------------
const name = (param: type): returnType => value;
const name = (param: type): returnType => { return value; };

Optional Parameters
-------------------
function name(required: type, optional?: type): returnType {}

Default Parameters
------------------
function name(param: type = defaultValue): returnType {}

Rest Parameters
---------------
function name(...params: type[]): returnType {}

Return Types
------------
void      - Kh√¥ng return
never     - Kh√¥ng bao gi·ªù return
string    - Return string
number    - Return number
boolean   - Return boolean
object    - Return object
Type[]    - Return array

Quy t·∫Øc v√†ng
------------
1. LU√îN khai b√°o type cho parameters
2. N√äN khai b√°o return type
3. Arrow function cho callbacks
4. Default parameters khi c√≥ gi√° tr·ªã m·∫∑c ƒë·ªãnh
5. Optional parameters khi gi√° tr·ªã c√≥ th·ªÉ undefined
6. Rest parameters cho s·ªë l∆∞·ª£ng kh√¥ng x√°c ƒë·ªãnh

================================================================================
B√ÄI T·∫¨P TH·ª∞C H√ÄNH
================================================================================

B√†i 1: Basic Functions
-----------------------
// TODO: T·∫°o function buildLoginUrl
// Parameters: baseUrl (string), locale (string, optional, default 'en')
// Return: string
// Example: buildLoginUrl('https://example.com', 'vi') 
// => 'https://example.com/vi/login'

B√†i 2: Arrow Functions
----------------------
// TODO: T·∫°o arrow function isValidPassword
// Parameter: password (string)
// Return: boolean (length >= 8 v√† c√≥ ch·ªØ hoa)

B√†i 3: Rest Parameters
----------------------
// TODO: T·∫°o function combineSelectors
// Parameters: ...selectors (string[])
// Return: string (k·∫øt h·ª£p c√°c selectors b·∫±ng d·∫•u ph·∫©y)
// Example: combineSelectors('#id', '.class', 'tag') 
// => '#id, .class, tag'

B√†i 4: Function Overloading
----------------------------
// TODO: T·∫°o function click v·ªõi overloading
// Signature 1: click(selector: string): void
// Signature 2: click(selector: string, timeout: number): void
// Signature 3: click(selector: string, timeout: number, retry: number): void

================================================================================
T√ÄI LI·ªÜU THAM KH·∫¢O
================================================================================

- TypeScript Handbook - Functions: 
  https://www.typescriptlang.org/docs/handbook/2/functions.html
  
- Arrow Functions: 
  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions
  
- TypeScript Deep Dive - Functions:
  https://basarat.gitbook.io/typescript/type-system/functions

================================================================================
üéì End of Module
Functions trong TypeScript for Automation Testing
================================================================================
